## Цели проектируемой ML-антифрод-системы
1.	Обеспечение конкурентоспособного уровня защиты от мошенничества  
Система должна обеспечивать уровень фрод-потерь не хуже рыночного бенчмарка:
- не более 2 мошеннических транзакций на 100 обработанных;
- общий ущерб от мошенничества не более 500 000 рублей в месяц.
2.	Ограничение доли ложных срабатываний  
Доля корректных транзакций, ошибочно классифицированных как мошеннические (false positive rate), не должна превышать 5%, чтобы избежать оттока клиентов и ухудшения пользовательского опыта.
3.	Поддержка требуемой производительности в пиковые нагрузки  
Система должна обрабатывать до 400 транзакций в секунду с задержкой принятия решения не более 200 мс на транзакцию, чтобы обеспечить бесперебойную работу в периоды высокой нагрузки (праздники, распродажи и т.п.).
4.	Размещение и эксплуатация в облачной инфраструктуре  
Весь модуль антифрода должен быть развернут и функционировать исключительно в облачной инфраструктуре, без использования собственных вычислительных ресурсов заказчика.
5.	Обеспечение конфиденциальности и защиты персональных данных  
Все данные, включая персональную информацию клиентов, должны обрабатываться в соответствии с требованиями законодательства (ФЗ 152, GDPR при необходимости).
Реализовать:
- шифрование данных при передаче и хранении;
- строгий контроль доступа к данным и моделям;
- запрет на выгрузку или копирование исходных CSV-файлов за пределы защищённой облачной среды.
6.	Совместимость с существующим форматом данных  
Система должна принимать на вход CSV-файлы с транзакциями, автоматически извлекать признаки и принимать решения без необходимости изменения формата источника данных.
7.	Демонстрация измеримых результатов в течение 3 месяцев  
К концу третьего месяца проекта должна быть представлена рабочая MVP-версия системы, способная:
- обрабатывать реальные транзакции в тестовом или пилотном режиме;
- продемонстрировать соответствие целям по уровню фрода и ложных срабатываний на исторических или симулированных данных;
- обеспечить основу для принятия решения о продолжении проекта.
8.	Завершение проекта в срок — в течение 6 месяцев с начала работ  
При положительном решении после MVP-этапа система должна быть полностью развернута, протестирована и передана в эксплуатацию в течение 6 месяцев с даты старта проекта.
9.	Соблюдение бюджетных ограничений  
Общие затраты на разработку, развертывание и настройку системы (включая облачные ресурсы, лицензии, сторонние сервисы) не должны превышать 10 млн рублей.

## Выбор метрики машинного обучения, оптимизация которой позволит достичь поставленных целей.  
Анализ задачи  
Антифрод — это задача бинарной классификации с сильной несбалансированностью классов: доля мошеннических транзакций обычно составляет менее 1%. В таких условиях:
Accuracy неприменима (модель может просто помечать всё как «не фрод» и получить >99% accuracy);  
Precision и Recall важны, но в разных аспектах:  
- Recall (чувствительность) — доля реально выявленных мошеннических транзакций. Высокий recall снижает ущерб.
- Precision — доля действительно мошеннических среди отклонённых. Низкая precision → много ложных срабатываний → отток клиентов.  
Заказчик жёстко ограничивает долю ложных срабатываний ≤ 5%, то есть False Positive Rate (FPR) ≤ 0.05.  
При этом требуется минимизировать финансовый ущерб, что связано с пропущенными фродовыми транзакциями (False Negatives).  
________________________________________
Рекомендуемая метрика: Fβ-мера с β < 1  
(например, F0.5-мера)  
Почему?  
- Fβ-мера обобщает Precision и Recall:  
Fβ=(1+β2)⋅β2⋅Precision+RecallPrecision⋅Recall
- При β < 1 (например, β = 0.5) больший вес придаётся Precision, что соответствует требованию ограничить ложные срабатывания.
- Это позволяет явно оптимизировать компромисс между ущербом от пропущенного фрода и раздражением легитимных клиентов.
F0.5-мера — хороший компромисс: штрафует за низкую точность (много ложных срабатываний), но всё ещё учитывает способность находить фрод.  
Итог  
Основная метрика для оптимизации модели: F0.5-мера (или другая Fβ-мера с β ≈ 0.3–0.7, подобранная под баланс стоимости FP/FN).  
Контрольные ограничения:   
- FPR ≤ 0.05;
- Месячный ущерб ≤ 500 000 ₽;
- Не более 2 фрод-транзакций на 100.

Дополнительно: мониторинг ключевых показателей  
В процессе обучения и эксплуатации необходимо отслеживать:  
- False Positive Rate (FPR) — должен быть ≤ 0.05;
- Recall (TPR) — чем выше, тем меньше ущерб;
- Суммарный ущерб на валидационных/тестовых данных — главный бизнес-KPI;
- Throughput и latency — для соблюдения требований производительности (400 транз./сек, <200 мс).

  ## MISSION Canvas для ML-антифрод-системы

| Элемент | Содержание |
|----------|-------------|
| **Motivation (Мотивация)** | Снижение финансовых потерь от мошенничества до уровня конкурентов (≤ 500 тыс. ₽/мес).Предотвращение оттока клиентов за счёт ограничения ложных срабатываний (FPR ≤ 5%)..Поддержание конкурентоспособности компании на рынке финансовых/платёжных услуг. |
| **Impact (Воздействие)** | Финансовый: снижение убытков от фрода на десятки–сотни тысяч рублей ежемесячно. .Операционный: автоматизация проверки транзакций → снижение нагрузки на аналитиков.. Репутационный: повышение доверия клиентов за счёт надёжной и ненавязчивой защиты. Риски: утечка персональных данных при нарушении конфиденциальности → штрафы, репутационный ущерб. |
| **Stakeholders (Заинтересованные стороны)** | Заказчик(руководство компании) — ожидает ROI и соответствие бюджету (≤10 млн ₽)..Клиенты— ожидают бесперебойных и безопасных транзакций без ложных блокировок. .Бизнес-аналитики и фрод-аналитики— пользователи системы, нуждаются в интерпретируемости решений. .DevOps / инфраструктурная команда— отвечает за развертывание в Yandex Cloud..Регуляторы— требуют соблюдения законов о защите персональных данных (ФЗ 152 и др.). |
| **Solution (Решение)** | ML-система бинарной классификации транзакций (фрод / не фрод), развернутая в Yandex Cloud..Обработка входных данных в формате CSV в реальном времени..Архитектура: feature extraction → модель (например, градиентный бустинг или ансамбль) → API для принятия решений..Поддержка онлайн-обновления модели и мониторинга дрейфа данных. |
| **Inputs (Входные данные)** | Исторические CSV-файлы с транзакциями (включая персональные данные клиентов)..Признаки: сумма, время, геолокация, устройство, поведенческие паттерны, история клиента и др..Метки: наличие/отсутствие мошенничества (может быть частично недоступна → semi-supervised подход)..Требования: данные конфиденциальны, обрабатываются только в защищённой облачной среде. |
| **Outputs (Выходные данные)** | Бинарное решение: «разрешить» / «заблокировать» транзакцию..Вероятность мошенничества (для последующей калибровки порога)..Объяснение решения (например, через SHAP или LIME) для аналитиков..Метрики качества: FPR, Recall, F0.5, оценка ущерба. |
| **Norms & Ethics (Нормы и этика)** | Соблюдение ФЗ 152: персональные данные не покидают Yandex Cloud, шифруются, доступ ограничен..Отсутствие дискриминации: модель не должна использовать чувствительные признаки (раса, пол и т.п.), даже косвенно..Прозрачность: возможность объяснить клиенту или регулятору причину блокировки..Аудит: все решения логируются, модель подлежит регулярной переоценке. |

Ключевые выводы из MISSION Canvas
- Баланс между бизнес-рисками и техническими возможностями — главный вызов. Система должна быть одновременно чувствительной к фроду и осторожной с легитимными клиентами.
- Конфиденциальность и облачная архитектура — не просто технические требования, а юридические и репутационные обязательства.
- Ограниченный бюджет и жёсткие сроки (MVP за 3 месяца) требуют использования проверенных, легко развертываемых решений (например, CatBoost + Yandex DataLens + Yandex Cloud Functions).
- Интерпретируемость — не «nice-to-have», а необходимость для аналитиков и соответствия нормативным требованиям.
Этот анализ позволяет команде проекта сфокусироваться на ключевых приоритетах, избежать «переинжиниринга» и обеспечить соответствие как бизнес-, так и этическим ожиданиям заказчика.

## Сформулируем ключевые задачи по принципу S.M.A.R.T.
________________________________________
1. Задача: Подготовить и облачную инфраструктуру для размещения антифрод-системы  
Specific (Конкретная):  
- Настроить GitHub-репозиторий, структуру проекта, CI/CD пайплайн;
Настроить в Yandex Cloud изолированную, безопасную и масштабируемую инфраструктуру, включающую:
— Создать новый bucket в Yandex Cloud Object Storage;
— Создать Spark-кластер в Yandex Data Processing;
- Все компоненты должны функционировать без использования on-premise ресурсов.
Measurable (Измеримая):
— Все сервисы размещены в отдельном VPC с настроенными security groups;
Achievable (Достижимая):  
Используются managed-сервисы Yandex Cloud:
— Object Storage для временного хранения CSV ;
— Compute Cloud или Serverless Containers для хостинга модели;
- Spark-кластер в Yandex Data Processing;
Relevant (Значимая):  
Подготовка инфраструктуры — критический путь для:
— соблюдения требования «только облако, только Yandex»;
— обеспечения конфиденциальности персональных данных (ФЗ‑152);
Time-bound (Ограниченная по времени):
- Базовая инфраструктура (с поддержкой обработки 50 транз./сек и хранения данных) должна быть готова к концу 2-го месяца
________________________________________
2. Задача: Разработать MVP-версию антифрод-системы  
Specific:
- Создать минимально жизнеспособную версию ML-антифрод-системы, способную принимать решения по транзакциям в реальном времени на основе исторических данных.
Measurable:
- Система обрабатывает ≥ 95% входящих транзакций с задержкой ≤ 200 мс;
- FPR ≤ 5%;
- Recall ≥ 85% на тестовой выборке за последние 3 месяца;
- Месячный смоделированный ущерб ≤ 500 000 ₽.
Achievable:
- Используются готовые ML-библиотеки (CatBoost), Yandex Cloud managed-сервисы, исторические CSV-данные заказчика.
Relevant:
- Позволяет продемонстрировать бизнес-эффект и принять решение о продолжении проекта.
Time-bound:
- Завершить разработку и внутреннее тестирование до конца 3-го месяца с даты старта проекта.
________________________________________
3. Задача: Обеспечить соответствие системы требованиям по ложным срабатываниям  
Specific:
- Настроить порог классификации и при необходимости скорректировать модель так, чтобы доля ложных срабатываний не превышала 5%.
Measurable:
- False Positive Rate (FPR) ≤ 0.05 на валидационной выборке, репрезентативной для пиковых и обычных нагрузок.
Achievable:
- Подбор порога на основе ROC/PR-кривых; при необходимости — переобучение с фокусом на precision (например, через F0.5-оптимизацию).
Relevant:
- Превышение FPR > 5% ведёт к оттоку клиентов и угрозе конкурентоспособности.
Time-bound:
- Достигнуть цели в рамках MVP (к 3-му месяцу).
_______________________________________
4. Задача: Развернуть систему в инфраструктуре Yandex Cloud  
Specific:
- Полностью разместить все компоненты антифрод-системы (приём данных, feature engineering, scoring, логирование) в Yandex Cloud без использования on-premise ресурсов.
Measurable:
- Все сервисы работают в выделенном VPC;
- Данные шифруются при передаче и хранении;
- Нет обращений к внешним (не-Yandex) ресурсам.
Achievable:
- Использование Yandex Functions, YDB, Object Storage, IAM и других managed-сервисов.
Relevant:
- Соответствует инфраструктурным ограничениям заказчика и требованиям конфиденциальности.
Time-bound:
- Инфраструктура развернута и протестирована к концу 3-го месяца.
_______________________________________
5. Задача: Настроить систему мониторинга качества антифрод-модели  
Specific (Конкретная):  
Разработать и внедрить систему мониторинга, которая в реальном времени отслеживает ключевые метрики качества антифрод-модели:
— долю ложных срабатываний (FPR),
— долю выявленного мошенничества (Recall),
- Система должна генерировать алерты при нарушении пороговых значений.
Measurable (Измеримая):
— FPR отображается ежедневно и не превышает 5%;
— Месячный ущерб от пропущенного фрода ≤ 500 000 ₽;
— Все метрики доступны через дашборд grafana;
— Настройка алертов
Achievable (Достижимая):  
Используются доступные инструменты:
— Promtheus, Grafana;
Relevant (Значимая):  
Мониторинг напрямую обеспечивает:
— Соблюдение бизнес-ограничений (ущерб, FPR);
Time-bound (Ограниченная по времени):
- Базовая версия системы мониторинга должна быть развернута и протестирована к концу к концу 6-го месяца проекта.



